{% extends 'base.html' %}
{% block title %}TREND - Movies{% endblock %}
{% block content %}
<h2>Movies Recommendations</h2>
<p>Here are some great movie recommendations!</p>
<div id="movie-list"></div>

<script>
    async function fetchMovies() {
        try {
            const response = await fetch('/api/tmdb');
            const data = await response.json();

            const movieList = document.getElementById('movie-list');
            movieList.innerHTML = '';

            if (data.results?.length > 0) {
                data.results.forEach(movie => {
                    movieList.innerHTML += `
                        <div class="movie-card">
                            <h3>${movie.title}</h3>
                            <p>${movie.overview}</p>
                            <img src="https://image.tmdb.org/t/p/w500${movie.poster_path}" 
                                 alt="${movie.title} poster" />
                        </div>`;
                });
            } else {
                movieList.innerHTML = '<p>No movies found</p>';
            }
        } catch (error) {
            console.error('Error fetching movies:', error);
            document.getElementById('movie-list').innerHTML = '<p>Error loading movies</p>';
        }
    }

    window.onload = fetchMovies;
</script>
{% endblock %}